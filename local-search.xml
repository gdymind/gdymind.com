<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>拼凑成自己</title>
    <link href="/2022/01/13/%E6%8B%BC%E5%87%91%E6%88%90%E8%87%AA%E5%B7%B1/"/>
    <url>/2022/01/13/%E6%8B%BC%E5%87%91%E6%88%90%E8%87%AA%E5%B7%B1/</url>
    
    <content type="html"><![CDATA[<p>在知乎上经常看到反思和评价类问题，比如“大众认为的xx真的是对的/错的吗”，或者”我这的这种（和家人/朋友/网络上观点不一样）的想法对不对“，以及“我与别人发生了xx矛盾，我是错的吗”</p><hr><p>我发现在这种问题下，答主或多或少会有一些支持题主想法的倾向。</p><p>“答主支持题主的倾向”产生的原因，我认为至少有两个。</p><ul><li>首先，提问往往是第一人称，大家会代入“主角立场”，答主们的潜意识里变成“我也这么做了/也这么想，现在外界对我有质疑，我要赶快寻找自身行为/想法的合理之处”，是“自私的基因”在起作用。就像在看剧的时候，如果主角是坏人，在“第一人称”视角的影响下，大家也会期待主角的邪恶计划成功实施。</li><li>除了“第一人称化”，另外一个原因，大概是追求观点的标新立异。在“大众认为的xx真的是对的/错的吗”这样的问题中，对主流观点的反转更能刺激人的感官，所谓“文似看山不喜平”，这是人天然的喜好和本能。除此之外，标新立异的另一个动力来自于答主本身”屁股“的朝向。因为现在很多答主其实是自媒体运营者，靠兜售观点变现，所以需要不一样的东西吸引眼球，达到和UC震惊部的标题异曲同工的效果。</li></ul><hr><p>说到吸引观众，现在的运营手段越来越专业，同时也因为运营手段的内卷，越来越重要了。比如B站的视频，up主往往会在视频的封面和标题上下巨大的功夫。据我观察，一般需要设计三部分：封面图片、封面文字和标题。封面图片自然是抓最“有梗”的一张；而封面文字和标题这两个文字内容中，一般其中一个起到视频信息概括的作用，另一个用震惊体来刺激人眼球，从而兼顾表达信息和提高点击率两方面。</p><p>但另一方面，有时候“看上去粗糙”本身带来的反差，会成为一个卖点。比如长相粗犷、设备简陋发吉他弹唱视频的“广西吴恩师”就是这种风格。再比如，近期很火的秃顶播音腔大叔也是这样的例子。试想一下，如果是一个仪表堂堂的小伙子在网上发同样内容的视频，估计就不会引起多大关注了。</p><hr><p>说到秃顶，我突然想起程序员脱发的梗的演变。几年之前，我记得知乎上关于程序员“秃顶”和“钱多话少死得早”这类说法的评价还是“这是程序员自嘲娱乐，不是真的”的口吻”，现在逐渐变成共识。这种共识的产生，一方面当然是因为说法本身在戏谑中同时存在合理性，但我想另一个重要的因素是重复的力量。</p><p><strong>重复的力量是强大和可怕的</strong>。举个例子，有的传销组织“抓”到新人之后，会每天强制被抓的重复喊各种弱智口号，天长日久，有人就真的相信了口号中的反智内容。不过人们往往会低估重复的力量，倾向于认为“我能hod住”。</p><p>其实人与人之间的交流也是这样的，大家带着不同的固有观点和视角与人交往。两个个人相处久了，在大量的固有观点的重复中，彼此对事物的看法也会不可避免地互相影响和交融。只不过限于交流的质量，融合程度相差很大。但是从另一个角度讲，人与人之间的思想交流又有很大的局限性。因为人只能以第一人称体验到感受到第一人称（单数）的感受。从技术上说，我们目前做不到在生理层面传递感受（不过将来能发送脑电波也不一定）。由此想到我此前写的一首说唱《Talk to me》（发过B站，但现在看起来一言难尽..）的一句词——“我与我共同呼吸，拼凑成自己”。</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>那些花儿</title>
    <link href="/2022/01/13/%E9%82%A3%E4%BA%9B%E8%8A%B1%E5%84%BF/"/>
    <url>/2022/01/13/%E9%82%A3%E4%BA%9B%E8%8A%B1%E5%84%BF/</url>
    
    <content type="html"><![CDATA[<h3 id="01-她们"><a href="#01-她们" class="headerlink" title="01 她们"></a>01 她们</h3><blockquote><p>那片笑声让我想起我的那些花儿</p></blockquote><p>“看到了”每个曾经为我盛开的姑娘。</p><blockquote><p>在我生命每个角落静静为我开着</p></blockquote><p>“每个角落”代表生命中的不同成长阶段，这句延续了<strong>集体</strong>视角——“我曾经的所有姑娘<strong>们</strong>”。</p><h3 id="02-她"><a href="#02-她" class="headerlink" title="02 她"></a>02 她</h3><blockquote><p>我曾以为我会永远守在她身旁</p></blockquote><p>目光从“我与<strong>她们</strong>”拉到“我与<strong>她</strong>”。大概在线性流淌的生命的某一时刻，只有“她”，没有“她们”。</p><blockquote><p>今天我们已经离去在人海茫茫</p></blockquote><h3 id="03-离"><a href="#03-离" class="headerlink" title="03 离"></a>03 离</h3><blockquote><p>她们都老了吧<br>她们在哪里呀<br>我们就这样<br>各自奔天涯</p></blockquote><p>是上段末尾“已经离去在人海茫茫”的重复，但视角拉回到“她们”这个整体</p><h3 id="04-叹"><a href="#04-叹" class="headerlink" title="04 叹"></a>04 叹</h3><blockquote><p>啦………….<br>想她<br>啦………….<br>她还在开吗<br>啦………….<br>去呀<br>她们已经被风吹走<br>散落在天涯</p></blockquote><p>“相思”时是“她”，“散落”时是“她们”——相思时亲近，散落时平淡。</p><h3 id="05-念"><a href="#05-念" class="headerlink" title="05 念"></a>05 念</h3><blockquote><p>有些故事还没讲完那就算了吧<br>那些心情在岁月中已经难辨真假<br>如今这里荒草丛生没有了鲜花<br>好在曾经拥有你们的春秋和冬夏</p></blockquote><p>“难辨真假”是“故事没讲完”的副作用，<strong>也是正作用</strong></p><h3 id="06-奔"><a href="#06-奔" class="headerlink" title="06 奔"></a>06 奔</h3><blockquote><p>她们都老了吧<br>她们在哪里呀<br>我们就这样<br>各自奔天涯</p></blockquote><p>从“她们散落在天涯”到“我们各自奔天涯”，“我”的眼中不光漂浮着静态的零落，还闪烁着动态的追寻</p><h3 id="07-梦"><a href="#07-梦" class="headerlink" title="07 梦"></a>07 梦</h3><blockquote><p><em>(无字呓语)</em></p></blockquote><p>“是的，我在梦里”</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>让子弹飞一会儿</title>
    <link href="/2021/05/18/%E8%AE%A9%E5%AD%90%E5%BC%B9%E9%A3%9E%E4%B8%80%E4%BC%9A%E5%84%BF/"/>
    <url>/2021/05/18/%E8%AE%A9%E5%AD%90%E5%BC%B9%E9%A3%9E%E4%B8%80%E4%BC%9A%E5%84%BF/</url>
    
    <content type="html"><![CDATA[<h3 id="只为劫财，不为劫色"><a href="#只为劫财，不为劫色" class="headerlink" title="只为劫财，不为劫色"></a>只为劫财，不为劫色</h3><blockquote><p>夫人，兄弟我此番，只为劫财</p></blockquote><p><img src="/img//image-20210518000358941.png" alt="image-20210518000358941"></p><blockquote><p>不为…（拖长腔，眼往县长夫人胸上瞄）</p></blockquote><p><img src="/img//image-20210518000417826.png" alt="image-20210518000417826"></p><blockquote><p>劫色（目光回到夫人眼上）</p></blockquote><p><img src="/img//image-20210518000540556.png" alt="image-20210518000540556"></p><h3 id="不刮穷鬼的钱你收谁的啊？"><a href="#不刮穷鬼的钱你收谁的啊？" class="headerlink" title="不刮穷鬼的钱你收谁的啊？"></a>不刮穷鬼的钱你收谁的啊？</h3><p>（两个人画面的反复切换）</p><blockquote><p>当过县长吗？</p><p>没有。</p><p>我告诉告诉你。县长上任，得巧立名目，拉拢豪绅，交税捐款。他们交了，才能让百姓跟着交钱。得钱之后，豪绅的钱如数奉还， 百姓的钱三七分成。</p><p>怎么才七成？！</p><p>七成是人家的，能得三成还得看黄四郎的脸色。 </p><p>谁的脸色？</p><p>（指向礼帽）他。</p></blockquote><p><img src="/img//image-20210518000743685.png" alt="image-20210518000743685"></p><p><img src="/img//image-20210518000754839.png" alt="image-20210518000754839"></p><blockquote><p>他？我大老远地来一趟</p></blockquote><p> <img src="/img//image-20210518001622337.png" alt="image-20210518001622337"></p><blockquote><p>就是为了看他的脸色？</p></blockquote><p><img src="/img//image-20210518001711464.png" alt="image-20210518001711464"></p><blockquote><p>…</p></blockquote><blockquote><p>我是想站着，还把钱挣了。</p></blockquote><p><img src="/img//image-20210518002712649.png" alt="image-20210518002712649"></p><blockquote><p>挣不成。</p></blockquote><p><img src="/img//image-20210518002725762.png" alt="image-20210518002725762"></p><h3 id="鼓，鼓，鼓！！"><a href="#鼓，鼓，鼓！！" class="headerlink" title="鼓，鼓，鼓！！"></a>鼓，鼓，鼓！！</h3><p><img src="/img//image-20210518003644632.png" alt="image-20210518003644632"></p><p><img src="/img//image-20210518003710359.png" alt="image-20210518003710359"></p><p><img src="/img//image-20210518003723209.png" alt="image-20210518003723209"></p><blockquote><p>好嗷嗷嗷嗷嗷</p></blockquote><p><img src="/img//image-20210518003943615.png" alt="image-20210518003943615"></p><blockquote><p>15！16！17！18！19！…</p></blockquote><p><img src="/img//image-20210518004335997.png" alt="image-20210518004335997"></p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Kubernetes从零开始</title>
    <link href="/2021/04/24/Kubernetes%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/"/>
    <url>/2021/04/24/Kubernetes%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B/</url>
    
    <content type="html"><![CDATA[<p><em>本篇blog记录本人学习Kubernetes的全过程，参考资料为<a href="https://kubernetes.io/docs">官方教程</a></em> 和 *<a href="https://www.youtube.com/watch?v=X48VuDVv0do">YouTube教程</a>*。</p><h2 id="Kubernetes是什么"><a href="#Kubernetes是什么" class="headerlink" title="Kubernetes是什么"></a>Kubernetes是什么</h2><p>本节我们介绍Kubernetes中的若干基本概念，包括control plane, node和could controller manager。</p><p>Kubernetes是用来管理<strong>container</strong>的，container和虚拟机（VM）功能类似，但是更加轻量。</p><blockquote><p>Similar to a VM, a container has its own filesystem, share of CPU, memory, process space, and more. As they are decoupled from the underlying infrastructure, they are portable across clouds and OS distributions.</p></blockquote><p>各个部署方式的示意图如下：</p><p><img src="/img/image-20210425173818586.png" alt="部署方式"></p><p>可以看到，VM有自己的OS，一个虚拟的完整系统，而container是在OS的上层部署的。</p><p>一些基本概念：</p><ol><li><strong>Node</strong>：一个节点，每个node可以是一台真实的计算机，也可以是一个虚拟机（Virtual machine）。</li><li><strong>Cluster</strong>：若干node的集合，一个cluster可以只有一个node。</li><li><strong>Pods</strong>：Cluster中运行的若干container的集合。</li><li><strong>Control plane</strong>：Control plane用于管理node和Pods。</li></ol><h3 id="Control-plane是什么"><a href="#Control-plane是什么" class="headerlink" title="Control plane是什么"></a>Control plane是什么</h3><p>Control plane用来做一些全局的决策，并对系统中发生的事件进行响应。理论上control plane可以部署在任何一台机器上，但习惯上所有control plane都会集中部署在一台机器上。</p><p>Control plane由以下几个部分组成：</p><ol><li><strong>kube-apiserver</strong>：API server是Kubernetes的前端，它提供API与cluster交互，是control plane的主要部件。</li><li><strong>etcd</strong>：Kubernetes的后端，提供key-value store来存储cluster数据。</li><li><strong>kube-scheduler</strong>：给Pod分配node。</li><li><strong>kube-controller-manager</strong>：用于运行各种controller（后面会讲什么是controller），比如用于通知node挂掉了的controller。</li><li><strong>cloud-controller-manager</strong>：用于管理跟cloud相关的部分。</li></ol><h4 id="Controller是什么"><a href="#Controller是什么" class="headerlink" title="Controller是什么"></a>Controller是什么</h4><p>上面提到我们可以用kube-controller-manager管理controller，这里介绍一下controller是什么。</p><p>在自动化领域，<strong>control loop</strong>是一个不终止的负反馈调节过程，它控制着系统state的变化。举个例子，某间房屋需要维持特定的温度（desired state），可以让一个controller通过不断开关温度调节设备让房屋的当前温度（current state），从而不断靠近目标温度（desired state）。</p><p>Kubernetes中的controller同样会将cluster中的一些state维持在desired state附近。Controller可以通过API server控制，也可以直接控制。</p><h3 id="Node是什么"><a href="#Node是什么" class="headerlink" title="Node是什么"></a>Node是什么</h3><p>一个node既可以是一台真正的计算机，也可以是virtual machine。每个node中包含以下组件：</p><ol><li><strong>kubelet</strong>：确保所有container在Pod中成功运行。</li><li><strong>kube-proxy</strong>：node上的网络代理。</li><li><strong>Container runtime</strong>: 管理运行中的container，支持Docker, containerd, CRI-O等</li></ol><h4 id="Node的注册"><a href="#Node的注册" class="headerlink" title="Node的注册"></a>Node的注册</h4><p>我们有两种添加node的方法：</p><ol><li>使用kubelet向API server进行self-registration</li><li>手动添加</li></ol><p>Node被创建后，kube-apiserver会检查<code>metadata.name</code>是否匹配。name是该node的标识符，它必须是个DNS Subdomain，且必须唯一。之后，系统会<strong>不断检查</strong>该node是否成功运行了相关服务。当<strong>所有的</strong>相关服务都成功运行，该node才会被允许在Pod上运行。</p><p><strong>Self-registration</strong>：kubelet中<code>--register-node</code>的默认值为true（推荐用默认值），这代表kubelet会尝试向向control plane进行self-register。</p><p>Self-registration的相关选项有<code>--kubeconfig、</code> <code>--cloud-provider</code>、<code>--register-node</code>、<code>--register-with-taints</code>、<code>--node-ip</code>和<code>--node-labels</code>。</p><p><strong>手动添加</strong>：我们可以使用 kubectl这个命令行工具手动创建node，此时<code>--register-node</code>的值为false.</p><h4 id="Node的status"><a href="#Node的status" class="headerlink" title="Node的status"></a>Node的status</h4><p>使用以下命令查看node的status，包括node的Address、Condition（Ready/DiskPressure…）、Capacity and Allocatable（可用资源情况——CPU、内存、Pod数量）和Info（一些通用信息）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl describe node &lt;node name&gt;<br></code></pre></td></tr></table></figure><h4 id="Node-controller"><a href="#Node-controller" class="headerlink" title="Node controller"></a>Node controller</h4><p>Node controller属于<strong>control plane</strong>中controller的一种，它有三个作用：</p><ol><li>如果启用了CIDR分配，负责分配CIDR block。</li><li>如果用了cloud，保证Node controller里记录的node在cloud上都是可用的。如果不可用，则将其从记录里删除。</li><li>监控node的健康。</li></ol><h4 id="Heartbeats"><a href="#Heartbeats" class="headerlink" title="Heartbeats"></a>Heartbeats</h4><p>Node需要不断发送hearbeat报告自己是否存活。有两种heartbeat——NodeStatus以及Lease对象，它们都由kubelet管理。其中，NodeStatus默认每5分钟更新一次，Lease默认每10秒更新一次。</p><h4 id="Reliability，Node-capacity，Node-topology、Graceful-node-shutdown"><a href="#Reliability，Node-capacity，Node-topology、Graceful-node-shutdown" class="headerlink" title="Reliability，Node capacity，Node topology、Graceful node shutdown"></a>Reliability，Node capacity，Node topology、Graceful node shutdown</h4><p>略</p><h3 id="Cloud-Controller-Manager是什么"><a href="#Cloud-Controller-Manager是什么" class="headerlink" title="Cloud Controller Manager是什么"></a>Cloud Controller Manager是什么</h3><p>Kubernetes致力于将管理cloud相关的功能与管理cluster本身的功能解耦。其中，与cloud相关的控制逻辑在control plance中的cloud-controller-manager（c-c-m）里实现。c-c-m以插件的形式存在，并与cloud提供者的API交互。</p><p><img src="/img/image-20210426004325961.png" alt="Kubernetes架构"></p><p>c-c-m包括以下controller：</p><ul><li><strong>Node controller</strong>：在cloud中创建node，记录could相关信息，获取node的hostname和network address，获取node的健康状态。</li><li><strong>Route controller</strong>：配置路由，使node间可以通信。</li><li><strong>Service controller</strong>：Service在若干Pods上运行，它将Pods对外暴露为network service。Cloud上会提供load balancing、network packet filtering之类的功能。我们使用service controller和could上这些功能的API交互。</li></ul><h2 id="基础操作入门"><a href="#基础操作入门" class="headerlink" title="基础操作入门"></a>基础操作入门</h2><h3 id="创建一个cluster"><a href="#创建一个cluster" class="headerlink" title="创建一个cluster"></a>创建一个cluster</h3><p>Cluster中包含两种资源，control plane和node。其中，</p><ul><li>Control plane用来管理cluster中的所有活动，我们使用Control plane中的API server与node进行交互。</li><li>每个Node是一台虚拟机或真实计算机。每个node中都有一个Kubelet，用来管理node，以及和control plane交互。Node中也需要支持container相关操作的工具，如containerd和Docker。</li></ul><p>示意图如下：</p><p><img src="/img//image-20210426114106766.png" alt="Control plane和node拓扑结构"></p><p>现在我们用Minikube来入门Kubernetes。Minikube比真正的Kubernetes简单，它会在<strong>本地</strong>创建只包含<strong>一个node</strong>的cluster。</p><p>使用以下命令启动minikube</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">minikube start<br></code></pre></td></tr></table></figure><p>我们使用kubectl来和Kubernetes交互，使用以下命令查看cluster信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl cluster-info<br></code></pre></td></tr></table></figure><p>使用以下命令查看node信息</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl get nodes<br></code></pre></td></tr></table></figure><p><img src="/img//image-20210426115500808.png" alt="kubebtl命令"></p><h3 id="部署一个App"><a href="#部署一个App" class="headerlink" title="部署一个App"></a>部署一个App</h3><p>为了部署containerized application，我们需要配置<strong>Deployment controller</strong>。它告诉系统如何创建和更新app的实例，并且不断监视app所在的node的状态。当node不可用时，Deployment controller会在›可用的node中再次创建App的instance。</p><p><img src="/img//image-20210426131755053.png" alt="Deployment controller"></p><p>我们仍然使用<strong>Kubectl</strong>创建Deployment。kubectl是一个命令行工具，它的基本</p><p>语法是：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs she">kubectl &lt;action&gt; &lt;resource&gt;<br></code></pre></td></tr></table></figure><p>其中，action是要执行的操作，如reate和describe；而resource指定了要操作的资源，如node和container。我们可以在每条kubectl命令后添加<code>--help</code>（如<code>kubectl get nodes --help</code>），来学习这条命令的参数。</p><p>使用以下命令创建Deployment：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl create deployment &lt;deployment name&gt; &lt;app image location&gt;<br></code></pre></td></tr></table></figure><p><img src="/img//image-20210426133030093.png" alt="Deployment"></p><p>上图中，我们将新建的Deployment命名为kubernetes-bootcamap，并且指定了一个已有的app image。在执行这条命令时，Kubernetes做了以下几件事：</p><ol><li>找到可用的node</li><li>在node中部署app</li><li>进行了一些设置，使得当该node不再可用时，可以寻找新的可用node</li></ol><p>使用以下命令查看已有的Deployment：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl get deployments<br></code></pre></td></tr></table></figure><p><img src="/img//image-20210426133531772.png" alt="Deployment"></p><p>Pod默认情况下只能对同一个cluster内的其他pods可见。</p><p>kubectl可以创建一个proxy，用来在cluster中通讯。为此，我们需要新开一个terminal，并键入以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">kubectl proxy<br></code></pre></td></tr></table></figure><p>另外，我们可以使用<code>ctrl + c</code>结束当前proxy的运行。</p><p><img src="/img//image-20210517164635148.png" alt="image-20210517164635148"></p><p>当这个proxy在运行时，我们可以在当前host（当前的terminal）使用它暴露出的API，来和kubernetes通信。例如，下面展示了如何使用<code>curl</code>命令查看其版本：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">curl http://localhost:8001/version<br></code></pre></td></tr></table></figure><p><img src="/img//image-20210517164919618.png" alt="image-20210517164919618"></p><p>API server会自动为每个pod创建一个endpoint，这个endpoint可以被proxy访问到。如果不想使用代理（Proxy），我们可以使用Service来提供服务。</p><p>写到这里，笔者感觉官方教程不太符合初学者学习路线，但对了解基本概念挺有帮助，下面我们跳转到另一个教程，教程链接是：</p><p><a href="https://www.youtube.com/watch?v=X48VuDVv0do">https://www.youtube.com/watch?v=X48VuDVv0do</a></p><h2 id="Overview"><a href="#Overview" class="headerlink" title="Overview"></a>Overview</h2><p> Container很轻量，为小型的服务（Microservice）提供了方便， 当今的一个服务背后，可能需要数百上千个container共同支持。Kubernetes就是用来支持和管理这些container运行的。Kubernetes提供了high availability（不宕机）、scalability（扩展性）和disaster recovery（备份和恢复数据）。</p><p>现在我们来<em>简要</em>了解Kubernetes的组成部分：</p><p><img src="/img//image-20210523175926539.png" alt="Kubernetes组成"></p><p>Kubernetes（k8s）的组成部件众多，一一介绍对新手不友好。下面我们通过一个运行js服务的例子来了解其中一些主要部件。</p><h3 id="Pod"><a href="#Pod" class="headerlink" title="Pod"></a>Pod</h3><p><strong>Pod</strong>是k8s中所操作的最小单位，是对container的一个封装。通常情况下，每个pod中只有一个app（理论上可以有多个）。每个pod有自己的IP，各个Pod间。但很不方便的是，当这个pod崩溃被重新创建时，<em>该ip会发生变化</em>。Pod崩溃的原因有很多，我们可以认为pod会经常“死亡-&gt;重建”。</p><p><img src="/img//image-20210524160702010.png" alt="Pod"></p><h3 id="Service"><a href="#Service" class="headerlink" title="Service"></a>Service</h3><p>为了解决IP变化的问题，我们需要使用Service。Service拥有固定不变的ip，并且可以和pod绑定。</p><p><img src="/img//image-20210524162332466.png" alt="Service与pod绑定"></p><p>Pod和Service的生命周期<strong>不一样</strong>，所以即使pod奔溃了，与它绑定的Service还是可用的，这样，我们就能获得一个不变的IP了。</p><p>我们并不想将所有的service暴露给外部的资源。在这个例子中，我们想要把包含js服务的service（my-app）暴露给用户，但不想把底层包含数据库（DB）的后端service暴露给外部资源。为此，我们在创建Service的时候就需要指定它是internal的还是external的。</p><p><img src="/img//image-20210524165444479.png" alt="External Service和Internal Service"></p><h3 id="Ingress"><a href="#Ingress" class="headerlink" title="Ingress"></a>Ingress</h3><p>上图中external service的url<code>http://my-app-service-ip:port</code>用起来不方便。例如，它可能是<code>http://124.89.101.2:8080</code>。在对外提供服务时，我们需要提供<code>https://my-app.com</code>这样的url。为此，我们需要用到Ingress。在这种情况下，Ingress被用来接收外部请求，然后再将其转发给Service。</p><p><img src="/img//image-20210524170644240.png" alt="image-20210524170644240"></p><h3 id="ConfigMap-and-Secret"><a href="#ConfigMap-and-Secret" class="headerlink" title="ConfigMap and Secret"></a>ConfigMap and Secret</h3><p>如前文所说，pod之间通过service进行通信。在这个例子中，<code>my-app</code>通过和<code>mongo-db-service</code>这个服务通信，实现与数据库的交互。</p><p>但是，数据库url的配置一般要用一个属性文件或者一些外部的环境变量。这些相关文件通常会内嵌在这个app的image文件当中。</p>]]></content>
    
    
    <categories>
      
      <category>编程</category>
      
    </categories>
    
    
    <tags>
      
      <tag>编程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>唐诗的升级之路</title>
    <link href="/2020/11/30/%E5%94%90%E8%AF%97%E7%9A%84%E5%8D%87%E7%BA%A7%E4%B9%8B%E8%B7%AF/"/>
    <url>/2020/11/30/%E5%94%90%E8%AF%97%E7%9A%84%E5%8D%87%E7%BA%A7%E4%B9%8B%E8%B7%AF/</url>
    
    <content type="html"><![CDATA[<blockquote><p>第一篇博客来试试水，总结一下陈磊团队所著《半小时漫画唐诗》涉及的唐诗发展历程，另外穿插笔者的评论感想。</p></blockquote><div class="douban-card-block"><a class="douban-card" href="https://book.douban.com/subject/33441524"><div class="douban-card-bgimg" style="background-image: url('https://images.weserv.nl/?url=https://img9.doubanio.com/view/subject/s/public/s32322386.jpg');"></div><div class="douban-card-left"><div class="douban-card-img" style="background-image: url('https://images.weserv.nl/?url=https://img9.doubanio.com/view/subject/s/public/s32322386.jpg');"></div></div><div class="douban-card-right" style="line-height: 1.7;"><div class="douban-card-item"><span>书名: </span><strong>半小时漫画唐诗</strong></div><div class="douban-card-item"><span>作者: </span><span>陈磊·半小时漫画团队</span></div><div class="douban-card-item"><span>出版年份: </span><span>2019-5-1</span></div><div class="douban-card-item"><span>评分: </span><span>7.2</span></div></div></a></div><style>.douban-card-block {display: flex;justify-content: center;align-items: center;width: 100%;max-height: 400px;}.douban-card {display: flex;margin: 30px 10px;padding: 15px;border-radius: 10px;position: relative;justify-content: center;align-items: center;overflow: hidden;color: antiquewhite;text-decoration: none;}.douban-card:hover {text-decoration: none;}.douban-card-bgimg {position: absolute;width: 115%;height: 115%;filter: blur(15px) brightness(0.6);background-size: 100%;background-position: center;background-repeat: no-repeat;}.douban-card-img {position: relative;height: 130px;width: 80px;background-size: 100%;background-position: center;background-repeat: no-repeat;}.douban-card-img {position: relative;height: 130px;width: 80px;}.douban-card-left {position: relative;display: flex;flex-direction: column;align-items: center;}.douban-card-right {position: relative;display: flex;flex-direction: column;margin-left: 12px;font-size: 16px;font-family: 'Courier New', Courier, monospace;line-height: 1.3;color: antiquewhite;}.douban-card-item {margin-top: 4px;}</style><h1 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h1><p>诗词充当了古人的娱乐方式之一，作用类似于现在的流行歌曲。相比于官方的史书，诗词以<strong>个人</strong>视角<strong>侧面</strong>反映了历史的过眼云烟。本篇讲诗的发展历程，词的发展会另开一篇。</p><p>鲁迅说：诗是<strong>韵</strong>文，从劳动时发生的。民间流传了许多有韵律的的诗句，后来据说孔子整理成了中国第一本诗歌总集《诗经》，里面多为<strong>四言诗</strong>，之后出现了字数更自由的《楚辞》。这两部书的代表作《国风》和《离骚》分别是当时现实和浪漫主义的代表。到了汉代和魏晋南北朝，诗发展出了<strong>五言</strong>和<strong>七言</strong>。总结来说随着字数增加，<strong>诗的节奏感越来越丰富</strong>。与此同时，由于科举制的出现（初唐成为必考科目）以及国家命运的剧烈变化，诗歌的<strong>情感内涵也在加强</strong>。</p><blockquote><p><strong>古体诗与格律诗</strong>：影响节奏感的除了字数（句式）外，还有格律（格式和音调）。<strong>古体诗</strong>要求不高，读来顺口即可；而唐代形成的<strong>格律诗</strong>讲究<strong>押韵</strong>（某些句尾字韵母相同）和<strong>对仗</strong>（上下两句要求平仄相反，句式相同，词义相关）。如果想了解格律，可以参考清朝李渔写的《笠翁对韵》，下面放的是郭浩瑜的注解版：</p></blockquote><div class="douban-card-block"><a class="douban-card" href="https://book.douban.com/subject/33426466"><div class="douban-card-bgimg" style="background-image: url('https://images.weserv.nl/?url=https://img9.doubanio.com/view/subject/s/public/s32304196.jpg');"></div><div class="douban-card-left"><div class="douban-card-img" style="background-image: url('https://images.weserv.nl/?url=https://img9.doubanio.com/view/subject/s/public/s32304196.jpg');"></div></div><div class="douban-card-right" style="line-height: 1.7;"><div class="douban-card-item"><span>书名: </span><strong>笠翁对韵</strong></div><div class="douban-card-item"><span>作者: </span><span>郭浩瑜译</span></div><div class="douban-card-item"><span>出版年份: </span><span>2019-4-1</span></div><div class="douban-card-item"><span>评分: </span><span>9.2</span></div></div></a></div><style>.douban-card-block {display: flex;justify-content: center;align-items: center;width: 100%;max-height: 400px;}.douban-card {display: flex;margin: 30px 10px;padding: 15px;border-radius: 10px;position: relative;justify-content: center;align-items: center;overflow: hidden;color: antiquewhite;text-decoration: none;}.douban-card:hover {text-decoration: none;}.douban-card-bgimg {position: absolute;width: 115%;height: 115%;filter: blur(15px) brightness(0.6);background-size: 100%;background-position: center;background-repeat: no-repeat;}.douban-card-img {position: relative;height: 130px;width: 80px;background-size: 100%;background-position: center;background-repeat: no-repeat;}.douban-card-img {position: relative;height: 130px;width: 80px;}.douban-card-left {position: relative;display: flex;flex-direction: column;align-items: center;}.douban-card-right {position: relative;display: flex;flex-direction: column;margin-left: 12px;font-size: 16px;font-family: 'Courier New', Courier, monospace;line-height: 1.3;color: antiquewhite;}.douban-card-item {margin-top: 4px;}</style><h1 id="初唐"><a href="#初唐" class="headerlink" title="初唐"></a>初唐</h1><p>初唐四杰——王勃、杨炯、卢照邻和骆宾王——引领了唐诗最初的发展，使诗歌内容从描写<strong>宫廷</strong>生活转向了<strong>市井</strong>和<strong>边塞</strong>生活，初步扭转前朝遗留的弊病。四人都命途多舛，但分别留下了<a href="https://baike.baidu.com/item/%E6%BB%95%E7%8E%8B%E9%98%81%E5%BA%8F/480325">《滕王阁序》</a>、<a href="https://baike.baidu.com/item/%E4%BB%8E%E5%86%9B%E8%A1%8C/7806182">《从军行》</a>、<a href="https://baike.baidu.com/item/%E9%95%BF%E5%AE%89%E5%8F%A4%E6%84%8F/4804">《长安古意》</a>和《咏鹅》等名篇。</p><p>初唐四杰之后，陈子昂发号召学习<strong>汉魏风骨</strong>，矫正了偏重格律、不重情感、华而不实的不良风气。最终，张若虚写出<a href="https://baike.baidu.com/item/%E6%98%A5%E6%B1%9F%E8%8A%B1%E6%9C%88%E5%A4%9C/1701">《春江花月夜》</a>，兼顾了<strong>格律</strong>和<strong>感情</strong>（诗中为思乡情）两条线，成为初唐集大成者。</p><blockquote><ul><li>落霞与孤鹜齐飞，秋水共长天一色。——王勃《滕王阁序》</li><li>宁为百夫长，胜作一书生。——杨炯《从军行》</li><li>得成比目何辞死，愿作鸳鸯不羡仙。——卢照邻《长安古意》</li><li>前不见古人，后不见来者。——陈子昂《登幽州台歌》</li><li>斜月沉沉藏海雾，碣石潇湘无限路。不知乘月几人归，落月摇情满江树。——张若虚《春江花月夜》</li></ul></blockquote><div class="note note-success">            <p>初唐对诗歌关于格律（形式）和情感（内涵）的讨论，让笔者联想到台湾女作家林奕含一个访谈中的片段（有兴趣可以观看下方视频）。在访谈中她对艺术中技巧和情感的关系不断发问，这也成了她短暂一生的心结。</p><blockquote><p>“我要讲的是中国的诗的传统，抒情诗的传统，讲的是诗经从情诗被后代学者超译误读成政治诗之前的那个传统。我们都知道’在心为志，发言为诗’，‘诗缘情而绮靡’，还有孔子说的’诗三百，一言以蔽之，曰思无邪’。</p><p>…我们明明都知道，一个人说出诗的时候，说出情诗的时候，说出情话的时候，他应该是言有所衷的，他是有‘志’的，他是有‘情’的，他应该是‘思无邪’。所以整个故事最让我痛苦的是：一个真正相信中文的人，怎么可以背叛这个浩浩汤汤超过五千年的语境？为什么可以背叛这个浩浩汤汤超过五千年的传统？</p><p>…你可以说他们的思想体系非常畸形，可以你能说他们的思想体系不精美，甚至，不美吗？</p><p>…我们认为一个真正的文人应该千锤百炼的真心，到最后回归竟然只变成是食色性也而已。</p><p>…我想要叩问的问题是：艺术它是否可以含有巧言令色的成分？</p><p>…会不会，艺术从来就只是巧言令色而已呢？所谓的艺术家，他们不停地创新艺术形式，翻花绳一样各种形变、各种质变。但是这些技法，会不会也是一种巧言令色而已呢？“</p></blockquote>          </div>        <style>.bbplayer{width: 100%; max-width: 850px; margin: auto}</style>        <div class="bbplayer">        <iframe class="bbplayer" id="mmedia-mURcJbLd" src="//player.bilibili.com/player.html?bvid=BV14x411m71e&page=1&high_quality=1&danmaku=true"            allowfullscreen="no"            scrolling="no" frameborder="0" sandbox="allow-top-navigation allow-same-origin allow-forms allow-scripts allow-popups"></iframe>        </div>        <script>            document.getElementById("mmedia-mURcJbLd").style.height=document.getElementById("mmedia-mURcJbLd").scrollWidth*0.76+"px";            window.onresize = function(){              document.getElementById("mmedia-mURcJbLd").style.height=document.getElementById("mmedia-mURcJbLd").scrollWidth*0.76+"px";            };        </script>        <h1 id="盛唐"><a href="#盛唐" class="headerlink" title="盛唐"></a>盛唐</h1><p>贺知章是响应陈子昂号召的第一批人之一，写过《咏柳》和《回乡偶书二首》，还作为伯乐提携了李白。作为同时经历初唐和盛唐的人，他起到了重要的纽带作用。</p><p>同样有承上启下作用的代表人物还有张九龄，他仕途通达，曾官至宰相，举荐过孟浩然、王维等人。之后他因劝谏被贬，从此诗兴大发，其思念妻子的<a href="https://baike.baidu.com/item/%E6%9C%9B%E6%9C%88%E6%80%80%E8%BF%9C/2798462">《望月怀远》</a>成为千古名篇。</p><blockquote><ul><li>海上生明月，天涯共此时。——张九龄《望月怀远》</li><li>草木有本心，何求美人折？——张九龄《<a href="https://baike.baidu.com/item/%E6%84%9F%E9%81%87%E5%8D%81%E4%BA%8C%E9%A6%96">感遇十二首</a>（其一）》</li></ul></blockquote><p>盛唐有很多不同流派，其中的代表有<strong>边塞诗派</strong>和<strong>山水田园诗派</strong>，接下来分别聊一聊。</p><h2 id="边塞诗派"><a href="#边塞诗派" class="headerlink" title="边塞诗派"></a>边塞诗派</h2><p>唐太宗以来的几个皇帝发起来从反侵略到”开边“的一系列军事战争，这促进里边塞诗派的发展。边塞诗主要描写<strong>边塞景色</strong>和<strong>军旅生活</strong>。</p><p>边塞景色描写既有写实的，也有浪漫的：</p><blockquote><p>大漠孤烟直，长河落日圆。——王维<a href="https://baike.baidu.com/item/%E4%BD%BF%E8%87%B3%E5%A1%9E%E4%B8%8A/">《使至塞上》</a></p><p>燕山雪花大如席，片篇垂落轩辕台。——李白<a href="https://baike.baidu.com/item/%E5%8C%97%E9%A3%8E%E8%A1%8C/">《北风行》</a></p></blockquote><p>而对于军旅生活，有写日常的，有写思乡的，也有描写反战情怀的。</p><h3 id="王翰"><a href="#王翰" class="headerlink" title="王翰"></a>王翰</h3><p>边塞诗派代表人物很多。其中，<a href="https://baike.baidu.com/item/%E7%8E%8B%E7%80%9A/70275?fromtitle=%E7%8E%8B%E7%BF%B0">王翰</a>性格叛逆，豪放不羁，一生都处在青春期，且诗如其人。《旧唐书》本传中记载，王翰登第后，“并州长史张嘉贞奇其才，礼接甚厚，翰感之，撰乐词以叙情，于席上自唱自舞，神气豪迈。张说镇并州，礼翰益至。” 与他同时代的边塞诗人还有李颀、王之涣等。</p><p>附：<a href="https://so.gushiwen.org/authors/authorvsw_2f56f31e2127A1.aspx">王翰诗文全集</a></p><blockquote><p>葡萄美酒夜光杯，欲饮琵琶马上催。醉卧沙场君莫笑，古来征战几人回。——王翰《凉州词》</p></blockquote><h3 id="其他诗人"><a href="#其他诗人" class="headerlink" title="其他诗人"></a>其他诗人</h3><p>高适</p><p>…我决定本篇太监，《在唐诗里孤独漫步》相较于这本快餐式的罗列风格来说，更加值得总结。</p>]]></content>
    
    
    <categories>
      
      <category>文学</category>
      
    </categories>
    
    
    <tags>
      
      <tag>读书笔记</tag>
      
      <tag>文学</tag>
      
      <tag>古代文学</tag>
      
      <tag>诗词</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
